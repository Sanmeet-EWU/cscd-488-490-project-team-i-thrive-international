{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://localhost:5085/api';\nexport const submitForm = async (formType, data) => {\n  try {\n    if (formType === \"ThriveIntake\") {\n      var _data$familyMembers;\n      const refugeeData = {\n        firstName: data.firstName,\n        lastName: data.lastName,\n        dateOfBirth: data.dateOfBirth,\n        // Expected in \"YYYY-MM-DD\" format from frontend\n        gender: data.gender,\n        countryOfOrigin: data.countryOfOrigin,\n        phoneNumber: data.phoneNumber,\n        emailAddress: data.emailAddress,\n        address: data.address,\n        familyMembers: ((_data$familyMembers = data.familyMembers) === null || _data$familyMembers === void 0 ? void 0 : _data$familyMembers.map(fm => ({\n          firstName: fm.firstName,\n          lastName: fm.lastName,\n          refugeeId: parseInt(fm.refugeeId),\n          // Convert to int\n          relationship: fm.relationship\n        }))) || []\n      };\n      const refugeeResponse = await axios.post(`${API_BASE_URL}/refugees`, refugeeData);\n      const refugeeId = refugeeResponse.data.refugeeId;\n      const intakeFormData = {\n        refugeeId: refugeeId,\n        formType: \"ThriveIntake\",\n        intakeDate: data.intakeDate,\n        navigatorName: data.navigatorName,\n        programTypeJson: JSON.stringify(data.programType),\n        asylumDateGranted: data.asylumDateGranted,\n        alienNumber: data.alienNumber,\n        eligibilityDate: data.eligibilityDate,\n        programEligibilityJson: JSON.stringify(data.programEligibility),\n        servicesNeeded: data.servicesNeeded\n      };\n      const intakeResponse = await axios.post(`${API_BASE_URL}/intakeforms`, intakeFormData);\n      return {\n        refugeeId,\n        intakeData: intakeResponse.data\n      };\n    } else if (formType === \"NewStudentRegistration\") {\n      const studentData = {\n        refugeeId: data.refugeeId,\n        firstName: data.student.firstName,\n        lastName: data.student.lastName,\n        birthDate: data.student.birthDate ? data.student.birthDate.split('T')[0] : null,\n        // \"YYYY-MM-DD\"\n        address: data.student.address,\n        gender: data.student.gender,\n        school: data.student.school,\n        currentGrade: data.student.currentGrade,\n        languagesSpoken: data.student.languagesSpoken,\n        countryOfOrigin: data.student.countryOfOrigin,\n        parentName: data.parent.parentName,\n        parentLanguagesSpoken: data.parent.languagesSpoken,\n        parentPhoneNumber: data.parent.parentPhoneNumber,\n        parentEmail: data.parent.parentEmail,\n        preferredContactMethod: data.parent.preferredContactMethod,\n        insuranceLiability: data.liability.insuranceLiability,\n        insuranceLiabilitySignature: data.liability.insuranceLiabilitySignature,\n        waiverAndRelease: data.liability.waiverAndRelease,\n        waiverAndReleaseSignature: data.liability.waiverAndReleaseSignature,\n        mediaRelease: data.liability.mediaRelease,\n        mediaReleaseSignature: data.liability.mediaReleaseSignature\n      };\n      console.log(\"Submitting student data:\", JSON.stringify(studentData, null, 2));\n      const studentResponse = await axios.post(`${API_BASE_URL}/students`, studentData);\n      return studentResponse.data;\n    } else {\n      throw new Error(\"Unknown form type\");\n    }\n  } catch (error) {\n    var _error$response, _error$response2;\n    console.error('API Error:', {\n      message: error.message,\n      response: (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data,\n      status: (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status\n    });\n    throw error;\n  }\n};\nexport const fetchRefugeeById = async refugeeId => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/refugees/${refugeeId}`);\n    return response.data;\n  } catch (error) {\n    var _error$response3, _error$response4;\n    console.error('Error fetching refugee:', {\n      message: error.message,\n      response: (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data,\n      status: (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.status\n    });\n    throw error;\n  }\n};\nexport const fetchFamilyMembers = async (refugeeId, firstName) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/family/${refugeeId}/${firstName}`);\n    return response.data; // Now returns { parentName, child }\n  } catch (error) {\n    var _error$response5, _error$response6;\n    console.error('Error fetching family members:', {\n      message: error.message,\n      response: (_error$response5 = error.response) === null || _error$response5 === void 0 ? void 0 : _error$response5.data,\n      status: (_error$response6 = error.response) === null || _error$response6 === void 0 ? void 0 : _error$response6.status\n    });\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","submitForm","formType","data","_data$familyMembers","refugeeData","firstName","lastName","dateOfBirth","gender","countryOfOrigin","phoneNumber","emailAddress","address","familyMembers","map","fm","refugeeId","parseInt","relationship","refugeeResponse","post","intakeFormData","intakeDate","navigatorName","programTypeJson","JSON","stringify","programType","asylumDateGranted","alienNumber","eligibilityDate","programEligibilityJson","programEligibility","servicesNeeded","intakeResponse","intakeData","studentData","student","birthDate","split","school","currentGrade","languagesSpoken","parentName","parent","parentLanguagesSpoken","parentPhoneNumber","parentEmail","preferredContactMethod","insuranceLiability","liability","insuranceLiabilitySignature","waiverAndRelease","waiverAndReleaseSignature","mediaRelease","mediaReleaseSignature","console","log","studentResponse","Error","error","_error$response","_error$response2","message","response","status","fetchRefugeeById","get","_error$response3","_error$response4","fetchFamilyMembers","_error$response5","_error$response6"],"sources":["/Users/parbhatrai/Desktop/FinalDay/cscd-488-490-project-team-i-thrive-international/src/services/apiService.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:5085/api';\n\nexport const submitForm = async (formType: string, data: any) => {\n  try {\n    if (formType === \"ThriveIntake\") {\n      const refugeeData = {\n        firstName: data.firstName,\n        lastName: data.lastName,\n        dateOfBirth: data.dateOfBirth, // Expected in \"YYYY-MM-DD\" format from frontend\n        gender: data.gender,\n        countryOfOrigin: data.countryOfOrigin,\n        phoneNumber: data.phoneNumber,\n        emailAddress: data.emailAddress,\n        address: data.address,\n        familyMembers: data.familyMembers?.map((fm: any) => ({\n          firstName: fm.firstName,\n          lastName: fm.lastName,\n          refugeeId: parseInt(fm.refugeeId), // Convert to int\n          relationship: fm.relationship\n        })) || []\n      };\n\n      const refugeeResponse = await axios.post(`${API_BASE_URL}/refugees`, refugeeData);\n      const refugeeId = refugeeResponse.data.refugeeId;\n\n      const intakeFormData = {\n        refugeeId: refugeeId,\n        formType: \"ThriveIntake\",\n        intakeDate: data.intakeDate,\n        navigatorName: data.navigatorName,\n        programTypeJson: JSON.stringify(data.programType),\n        asylumDateGranted: data.asylumDateGranted,\n        alienNumber: data.alienNumber,\n        eligibilityDate: data.eligibilityDate,\n        programEligibilityJson: JSON.stringify(data.programEligibility),\n        servicesNeeded: data.servicesNeeded\n      };\n\n      const intakeResponse = await axios.post(`${API_BASE_URL}/intakeforms`, intakeFormData);\n      return { refugeeId, intakeData: intakeResponse.data };\n    } \n    else if (formType === \"NewStudentRegistration\") {\n      const studentData = {\n        refugeeId: data.refugeeId,\n        firstName: data.student.firstName,\n        lastName: data.student.lastName,\n        birthDate: data.student.birthDate ? data.student.birthDate.split('T')[0] : null, // \"YYYY-MM-DD\"\n        address: data.student.address,\n        gender: data.student.gender,\n        school: data.student.school,\n        currentGrade: data.student.currentGrade,\n        languagesSpoken: data.student.languagesSpoken,\n        countryOfOrigin: data.student.countryOfOrigin,\n        parentName: data.parent.parentName,\n        parentLanguagesSpoken: data.parent.languagesSpoken,\n        parentPhoneNumber: data.parent.parentPhoneNumber,\n        parentEmail: data.parent.parentEmail,\n        preferredContactMethod: data.parent.preferredContactMethod,\n        insuranceLiability: data.liability.insuranceLiability,\n        insuranceLiabilitySignature: data.liability.insuranceLiabilitySignature,\n        waiverAndRelease: data.liability.waiverAndRelease,\n        waiverAndReleaseSignature: data.liability.waiverAndReleaseSignature,\n        mediaRelease: data.liability.mediaRelease,\n        mediaReleaseSignature: data.liability.mediaReleaseSignature\n      };\n\n      console.log(\"Submitting student data:\", JSON.stringify(studentData, null, 2));\n      const studentResponse = await axios.post(`${API_BASE_URL}/students`, studentData);\n      return studentResponse.data;\n    }\n    else {\n      throw new Error(\"Unknown form type\");\n    }\n  } catch (error: any) {\n    console.error('API Error:', {\n      message: error.message,\n      response: error.response?.data,\n      status: error.response?.status\n    });\n    throw error;\n  }\n};\n\nexport const fetchRefugeeById = async (refugeeId: number) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/refugees/${refugeeId}`);\n    return response.data;\n  } catch (error: any) {\n    console.error('Error fetching refugee:', {\n      message: error.message,\n      response: error.response?.data,\n      status: error.response?.status\n    });\n    throw error;\n  }\n};\n\nexport const fetchFamilyMembers = async (refugeeId: number, firstName: string) => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/family/${refugeeId}/${firstName}`);\n    return response.data; // Now returns { parentName, child }\n  } catch (error: any) {\n    console.error('Error fetching family members:', {\n      message: error.message,\n      response: error.response?.data,\n      status: error.response?.status\n    });\n    throw error;\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}